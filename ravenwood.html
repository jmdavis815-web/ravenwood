<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ravenwood · Town & Manor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="style.css" />
</head>
<body data-page="world">
  <div class="rw-bg-overlay"></div>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg rw-navbar">
    <div class="container">
      <a class="navbar-brand rw-brand" href="ravenwood.html">
        Ravenwood
      </a>

      <button
        title="collapse"
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#rwNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="rwNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link rw-nav-link active" href="ravenwood.html">
              Town
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link rw-nav-link" href="#manor">
              Manor
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link rw-nav-link" href="#books">
              Library
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link rw-nav-link" href="#market">
              Market Lane
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link rw-nav-link" href="#witchwood">
              Witchwood Edge
            </a>
          </li>
        </ul>

                <div class="d-flex align-items-center gap-2">
          <div class="rw-user-pill">
            <div class="rw-user-meta">
              <span id="rwUserName">Guest</span>
              <span class="rw-user-tag" id="rwUserArchetype">Wanderer</span>
            </div>
          </div>
          <button class="btn btn-sm btn-outline-light" id="rwResetBtn">
            Reset Character
          </button>
        </div>

      </div>
    </div>
  </nav>

  <!-- Ravenwood Lantern -->
         <div class="col d-flex flex-row align-items-center justify-content-around mb-4">
        <div class="rw-lantern">
            <div class="rw-lantern-hook"></div>
                <div class="rw-lantern-frame">
                    <div class="rw-lantern-glass">
                    <div class="rw-lantern-flame"></div>
                </div>
            </div>
        </div>
        <img src="rw-sign.png" alt="Ravenwood Sign" class="rw-sign-img" width="300px" />
        <!-- Ravenwood Lantern -->
        <div class="rw-lantern">
            <div class="rw-lantern-hook"></div>
                <div class="rw-lantern-frame">
                    <div class="rw-lantern-glass">
                    <div class="rw-lantern-flame"></div>
                </div>
            </div>
        </div>
        </div>

  <!-- MAIN CONTENT -->
  <main class="rw-main container mt-3">
    <div class="row">

        <!-- RIGHT: Snapshot & Secrets -->
        <div id="snapshot" class="rw-panel col-12 col-md-5 col-lg-4">
              <aside class="rw-side mb-4 rounded-3 avatar-container">
          <div class="d-flex align-items-center mb-3 gap-3">
            <div class="rw-avatar-circle rw-avatar-f-mystic rw-avatar-lg" id="rwSummaryAvatar"></div>
            <div>
              <h3 class="rw-panel-subtitle mb-1">Your Circle Snapshot</h3>
              <p class="rw-panel-body small mb-0">
                How Ravenwood currently sees you.
              </p>
            </div>
          </div>
          </aside>

          <p class="rw-panel-body mb-2">
            <strong>Name:</strong> <span id="rwSummaryName">—</span><br />
            <strong>Archetype:</strong> <span id="rwSummaryArchetype">—</span><br />
            <strong>Affinity:</strong> <span id="rwSummaryAffinity">—</span><br />
            <strong>Journey Tone:</strong> <span id="rwSummaryTone">—</span>
          </p>
          <p class="rw-panel-body small mb-0">
            Your choices may change how certain places feel in later adventures.
            For now, they help Ravenwood recognize which threads belong to you.
          </p>

            <!-- Inventory Preview -->
  <div class="d-flex justify-content-between align-items-center mt-3 mb-2">
    <h4 class="rw-panel-subtitle mb-0">Inventory</h4>
    <button
      type="button"
      class="btn btn-sm btn-outline-light"
      id="rwInventoryBtn"
    >
      Open
    </button>
  </div>

  <!-- Inventory Modal -->
<div class="modal fade" id="rwInventoryModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content rw-panel rw-panel-inventory">
      <div class="modal-header border-0">
        <h5 class="modal-title rw-panel-subtitle">Inventory</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>

      <div class="modal-body pt-0">
        <p class="rw-panel-body small mb-3">
          Items you’ve picked up in Ravenwood will appear here.
        </p>

        <!-- Backpack + grid -->
        <div class="rw-inventory-wrapper">
          <div class="rw-inventory-grid" id="rwInventoryGrid">
            <!-- JS fills slots here; NO <img> here in HTML -->
          </div>
        </div>
      </div>

      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn btn-outline-light btn-sm"
          data-bs-dismiss="modal"
        >
          Close
        </button>
      </div>
    </div>
  </div>
</div>
        
          <!-- RAVENWOOD WORLD MAP PANEL -->
<section class="rw-panel mb-3 mt-1">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <div>
      <div class="rw-panel-subtitle text-center">Map</div>
      <h3 class="rw-panel-title text-center fs-6 mb-0">Where You Are</h3>
    </div>
    <div class="rw-tag">
      
      <span id="rwMapCurrentLocation">Town Square</span>
    </div>
  </div>

  <div class="rw-map-wrapper">
    <!-- parchment map image -->
    <img
      src="ravenwood-map.png"
      alt="Map of Ravenwood"
      class="rw-map-img"
    />

    <!-- interactive pins layered on top of the image -->
    <!-- Town Square (center) -->
    <button
        title="Town Square"
      type="button"
      class="rw-map-node rw-map-pin"
      data-map-location="square"
    ></button>

    <!-- The Moonwell (upper-right) -->
    <button
        title="The Moonwell"
      type="button"
      class="rw-map-node rw-map-pin"
      data-map-location="moonwell"
    ></button>

    <!-- Market Lane (lower-center) -->
    <button
    title="Market Lane"
      type="button"
      class="rw-map-node rw-map-pin"
      data-map-location="market"
    ></button>

    <!-- Old Chapel (mid-left) -->
    <button
    title="Old Chapel"
      type="button"
      class="rw-map-node rw-map-pin"
      data-map-location="chapel"
    ></button>

    <!-- Witchwood (lower-left) -->
    <button
    title="Witchwood"
      type="button"
      class="rw-map-node rw-map-pin"
      data-map-location="witchwood"
    ></button>

    <!-- Ravenwood Overlook (bottom-left cliffs) -->
    <button
        title="Overlook"
      type="button"
      class="rw-map-node rw-map-pin"
      data-map-location="overlook"
    ></button>
  </div>
</section>

        <!-- Whispers & Secrets -->
        <aside class="rw-panel rw-side mb-4 mt-3">
          <h3 class="rw-panel-subtitle mb-2">Whispers & Secrets</h3>
          <p class="rw-panel-body small mb-2">
            Certain locations will offer you a secret the first time you step
            there. This town remembers what you’ve uncovered on this device.
          </p>
          <ul class="rw-secrets-list mb-2" id="rwSecretsList">
            <li class="rw-secret-empty text-muted small">
              No secrets yet. The town is still deciding if it trusts you.
            </li>
          </ul>
          <p class="rw-panel-body rw-secret-hint small mb-0" id="rwSecretsHint">
            Hint: Fogwalk Alley doesn’t always appear. When it does, listen closely.
          </p>
        </aside>

    </div>

      <!-- LEFT: Town & Places -->
      <div id="mainCol" class="col-12 col-md-7 col-lg-8 mt-md-0 mt-4">
        <!-- Town Intro -->
        <section class="rw-panel mb-4" id="manor">
          <h2 class="rw-panel-title mb-2">The Town of Ravenwood</h2>
          <p class="rw-panel-body mb-0">
            Ravenwood isn’t only the manor on the hill. It is the crooked streets,
            the lantern-lit square, the old chapel that should be abandoned but
            never quite is. It is the Moonwell where wishes go missing, the
            Witchwood edge where the trees lean in to listen, and the fog-thin
            alleys that remember every footstep.
          </p>
        </section>

        <!-- Town Map Grid -->
        <section class="rw-panel mb-4" id="rwTown">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="rw-panel-subtitle mb-0">Town Map</h3>
            <span class="rw-tag">Explore</span>
          </div>

          <div class="row g-3 rw-town-grid" id="rwTownMap">
            <!-- Town Square -->
            <div class="col-md-6 col-xl-4">
              <button
                class="rw-location-card w-100 text-start"
                type="button"
                data-location="square"
              >
                <div class="rw-location-header d-flex justify-content-between align-items-center">
                  <span class="rw-location-name">Town Square</span>
                  <span class="rw-location-badge">Lanterns</span>
                </div>
                <p class="rw-location-blurb mb-0">
                  Cobblestones, a cracked fountain, and notices pinned where no one admits to reading them.
                </p>
              </button>
            </div>

            <!-- Moonwell -->
            <div class="col-md-6 col-xl-4">
              <button
                class="rw-location-card w-100 text-start"
                type="button"
                data-location="moonwell"
              >
                <div class="rw-location-header d-flex justify-content-between align-items-center">
                  <span class="rw-location-name">The Moonwell</span>
                  <span class="rw-location-badge">Waters</span>
                </div>
                <p class="rw-location-blurb mb-0">
                  A stone-ringed well that reflects the moon even when the sky is empty.
                </p>
              </button>
            </div>

            <!-- Market Lane -->
            <div class="col-md-6 col-xl-4" id="market">
              <button
                class="rw-location-card w-100 text-start"
                type="button"
                data-location="market"
              >
                <div class="rw-location-header d-flex justify-content-between align-items-center">
                  <span class="rw-location-name">Market Lane</span>
                  <span class="rw-location-badge">Charms</span>
                </div>
                <p class="rw-location-blurb mb-0">
                  Stalls of incense, half-truths, and talismans that may or may not be sleeping gods.
                </p>
              </button>
            </div>

            <!-- Old Chapel -->
            <div class="col-md-6 col-xl-4">
              <button
                class="rw-location-card w-100 text-start"
                type="button"
                data-location="chapel"
              >
                <div class="rw-location-header d-flex justify-content-between align-items-center">
                  <span class="rw-location-name">Old Chapel</span>
                  <span class="rw-location-badge">Echoes</span>
                </div>
                <p class="rw-location-blurb mb-0">
                  Stained glass saints watch over pews where the Circle once met in secret.
                </p>
              </button>
            </div>

            <!-- Witchwood Edge -->
            <div class="col-md-6 col-xl-4" id="witchwood">
              <button
                class="rw-location-card w-100 text-start"
                type="button"
                data-location="witchwood"
              >
                <div class="rw-location-header d-flex justify-content-between align-items-center">
                  <span class="rw-location-name">Witchwood Edge</span>
                  <span class="rw-location-badge">Forest</span>
                </div>
                <p class="rw-location-blurb mb-0">
                  Trees that lean toward you as you pass, as if deciding whether to let you leave.
                </p>
              </button>
            </div>

            <!-- Fogwalk (Hidden Alley) -->
            <div class="col-md-6 col-xl-4">
              <button
                class="rw-location-card w-100 text-start rw-location-secret"
                type="button"
                data-location="fogwalk"
              >
                <div class="rw-location-header d-flex justify-content-between align-items-center">
                  <span class="rw-location-name">Fogwalk Alley</span>
                  <span class="rw-location-badge">Secret</span>
                </div>
                <p class="rw-location-blurb mb-0">
                  You only find this alley when you’re not looking for it. It never looks quite the same twice.
                </p>
              </button>
            </div>
          </div>
        </section>

        <!-- Location Detail / “You Are Here” -->
        <section class="rw-panel mb-4" id="rwLocationDetail">
          <h3 class="rw-panel-subtitle mb-2" id="rwLocationDetailTitle">
            Town Square
          </h3>
          <p class="rw-panel-body mb-2" id="rwLocationDetailBody">
            Lanterns sway over the cracked stone fountain. A notice flaps on the board,
            its ink blurred by mist. Somewhere a bell tolls the wrong hour, and you’re
            almost certain it’s for you.
          </p>
          <p class="rw-panel-body small mb-0" id="rwLocationDetailHint">
            Tip: click different locations on the map above to see what they reveal.
            Some places may whisper secrets that the town will remember for you.
          </p>
        </section>

        <!-- Library & Adventures (kept from old version) -->
        <section id="books" class="rw-panel mb-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="rw-panel-subtitle mb-0">Library of Tomes</h3>
            <span class="rw-tag">Books</span>
          </div>

          <div class="row g-3">
            <div class="col-md-6">
              <div class="card rw-card shadow-sm h-100">
                <div class="card-body">
                  <h5 class="rw-card-title">Daughters of the Circle</h5>
                  <p class="rw-card-text">
                    Enter the core Ravenwood saga. Read the books in sequence,
                    keep track of prophecies, and unlock lore notes as you go.
                  </p>
                  <button class="btn btn-outline-light w-100" type="button">
                    View Books (placeholder)
                  </button>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card rw-card shadow-sm h-100">
                <div class="card-body">
                  <h5 class="rw-card-title">Sons of the Dark Mother</h5>
                  <p class="rw-card-text">
                    Step into the darker mirror of the Circle: starborne
                    princes, old wars, and the shadows beneath the wards.
                  </p>
                  <button class="btn btn-outline-light w-100" type="button">
                    View Books (placeholder)
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="adventures" class="rw-panel mb-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="rw-panel-subtitle mb-0">Adventures</h3>
            <span class="rw-tag">Interactive</span>
          </div>

          <div class="row g-3">
            <div class="col-md-6">
              <div class="card rw-card shadow-sm h-100">
                <div class="card-body">
                  <h5 class="rw-card-title">The Whispering Gate</h5>
                  <p class="rw-card-text">
                    Relive Jes’s first night at the Ravenwood gate — this time
                    with you standing beside her. Choose what you say to the wards.
                  </p>
                  <button class="btn btn-outline-light w-100" type="button">
                    Begin Adventure (placeholder)
                  </button>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="card rw-card shadow-sm h-100">
                <div class="card-body">
                  <h5 class="rw-card-title">The Library After Midnight</h5>
                  <p class="rw-card-text">
                    The shelves rearrange themselves after dark. Follow a living
                    book and see where it leads.
                  </p>
                  <button class="btn btn-outline-light w-100" type="button">
                    Begin Adventure (placeholder)
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      
        
    </div>
  </main>
  

  <!-- Bootstrap JS bundle -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  ></script>

  <!-- Supabase JS (v2) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Your app logic -->
  <script src="app.js" defer></script>

    <!-- Avatar Edit Modal -->
  <div class="modal fade" id="rwAvatarModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rw-panel">
        <div class="modal-header border-0">
          <h5 class="modal-title rw-panel-subtitle">Change Your Avatar</h5>
          <button
            type="button"
            class="btn-close btn-close-white"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>

        <div class="modal-body pt-0">
          <p class="rw-panel-body small mb-3">
            The manor will remember the face you choose. This only changes how you
            appear in Ravenwood.
          </p>

          <form id="rwAvatarForm" class="rw-form">
            <div class="rw-avatar-picker">

              <!-- Female Mystic -->
              <label class="rw-avatar-option">
                <input
                  type="radio"
                  name="rwAvatarChoice"
                  value="f-mystic"
                  checked
                />
                <div class="rw-avatar-chip">
                  <div class="rw-avatar-circle rw-avatar-f-mystic"></div>
                  <span class="text-light">Female Mystic</span>
                </div>
              </label>

              <!-- Female Shadow Witch -->
              <label class="rw-avatar-option">
                <input
                  type="radio"
                  name="rwAvatarChoice"
                  value="f-shadow"
                />
                <div class="rw-avatar-chip">
                  <div class="rw-avatar-circle rw-avatar-f-shadow"></div>
                  <span class="text-light">Female Shadow Witch</span>
                </div>
              </label>

              <!-- Male Shadow Witch -->
              <label class="rw-avatar-option">
                <input
                  type="radio"
                  name="rwAvatarChoice"
                  value="m-shadow"
                />
                <div class="rw-avatar-chip">
                  <div class="rw-avatar-circle rw-avatar-m-shadow"></div>
                  <span class="text-light">Male Shadow Witch</span>
                </div>
              </label>

              <!-- Male Mystic -->
              <label class="rw-avatar-option">
                <input
                  type="radio"
                  name="rwAvatarChoice"
                  value="m-mystic"
                />
                <div class="rw-avatar-chip">
                  <div class="rw-avatar-circle rw-avatar-m-mystic"></div>
                  <span class="text-light">Male Mystic</span>
                </div>
              </label>

            </div>
          </form>
        </div>

        <div class="modal-footer border-0">
          <button
            type="button"
            class="btn btn-outline-light btn-sm"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn rw-btn-main btn-sm"
            id="rwAvatarSaveBtn"
          >
            Save Avatar
          </button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
